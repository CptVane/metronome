{% extends 'base.html' %}

{% block content %}
<!-- Header della pagina -->
<div class="header bg-dark text-white p-3 d-flex justify-content-between align-items-center container-fluid">
    <h1 class="m-0">Dashboard</h1>
    <!-- Form del filtro date -->
    <form id="date-filter-form" class="d-flex gap-2" method="get">
        <input type="date" name="start_date" value="{{ start_date }}" class="form-control" id="start_date">
        <input type="date" name="end_date" value="{{ end_date }}" class="form-control" id="end_date">
    </form>
    <!-- Bottoni di azione -->
    <div class="btn-group">
        <a href="{{ url_for('add_work') }}" class="btn btn-secondary">Add Work</a>
        <a href="{{ url_for('manage_events') }}" class="btn btn-secondary">Manage Events</a>
        <a href="{{ url_for('manage_clients') }}" class="btn btn-secondary">Manage Clients</a>
        <a href="{{ url_for('global_settings') }}" class="btn btn-secondary">Global Settings</a>
    </div>
</div>

<!-- Contenuto principale -->
<div class="mt-5 pt-4 container-fluid">
    <!-- Tabella della dashboard -->
    <div class="table-responsive">
        <table class="table table-dark table-striped table-bordered w-100">
            <thead class="sticky-top bg-dark">
                <tr>
                    <th scope="col">Date</th>
                    <th scope="col">Work Name</th>
                    <th scope="col">Client Name</th>
                    <th scope="col">Work ID</th>
                    <th scope="col">Start Time</th>
                    <th scope="col">End Time</th>
                    <th scope="col">Break Time</th>
                    <th scope="col">Work Time</th>
                    <th scope="col">Total Fee</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for work in works %}
                <tr>
                    <td>{{ work.date }}</td>
                    <td>{{ work.event.name }}</td>
                    <td>{{ work.event.client.name }}</td>
                    <td>{{ work.event.work_id }}</td>
                    <td>{{ work.start_time }}</td>
                    <td>{{ work.end_time }}</td>
                    <td>{{ work.break_time }}</td>
                    <td>{{ work.work_time }}</td>
                    <td>{{ work.total_fee }}</td>
                    <td>
                        <a href="{{ url_for('edit_work', id=work.id) }}" class="btn btn-sm btn-primary">Edit</a>
                        <a href="{{ url_for('delete_work', id=work.id) }}" class="btn btn-sm btn-danger">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
